(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&c(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function c(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();let v=1;document.addEventListener("DOMContentLoaded",()=>{if(L(),O(),C(),b(),x(),I(),window.location.search){const t=window.location.protocol+"//"+window.location.host+window.location.pathname;window.history.replaceState({path:t},"",t)}});function L(){window.addEventListener("scroll",I)}function I(){const t=document.body.scrollTop||document.documentElement.scrollTop,e=document.documentElement.scrollHeight-document.documentElement.clientHeight,n=t/e*100;document.getElementById("progressBar").style.width=n+"%"}function F(){const t=document.getElementById("servicosContainer"),e=document.createElement("div");e.className="servico-item",e.dataset.index=v,e.innerHTML=`
        <div class="servico-grid">
            <div class="servico-field">
                <label>Nome do serviço</label>
                <input type="text" name="servicos[${v}][nome]" placeholder="Nome do serviço">
            </div>
            <div class="servico-field">
                <label>Preço</label>
                <input type="text" name="servicos[${v}][preco]" class="preco-input" placeholder="R$ 0,00">
            </div>
            <div class="servico-field">
                <label>Duração</label>
                <input type="text" name="servicos[${v}][duracao]" class="duracao-input" placeholder="Ex: 45 min">
            </div>
            <button type="button" class="btn-remove-servico" onclick="removeServico(this)" title="Remover serviço">
                <span>✕</span>
            </button>
        </div>
    `,t.appendChild(e),v++,e.querySelector(".preco-input").addEventListener("input",M),requestAnimationFrame(()=>{const c=e.querySelector('input[name*="[nome]"]');c&&c.focus()})}function B(t){if(document.getElementById("servicosContainer").querySelectorAll(".servico-item").length<=1){g("servicosError","É necessário ter pelo menos 1 serviço");return}const c=t.closest(".servico-item");c.classList.add("removing"),setTimeout(()=>{c.remove(),$("servicosError")},300)}function b(){document.querySelectorAll(".preco-input").forEach(t=>{t.addEventListener("input",M)})}function M(t){let e=t.target.value.replace(/\D/g,"");if(e===""){t.target.value="";return}e=parseInt(e,10),e=(e/100).toFixed(2),e=e.replace(".",","),e="R$ "+e.replace(/\B(?=(\d{3})+(?!\d))/g,"."),t.target.value=e}function C(){const t=document.getElementById("agendamentoMesmoDia"),e=t==null?void 0:t.parentElement.querySelector(".toggle-label");t&&e&&t.addEventListener("change",()=>{e.textContent=t.checked?"Sim":"Não"})}function x(){document.querySelectorAll(".check-outro").forEach(n=>{n.addEventListener("change",c=>{const o=c.target.dataset.target,i=document.getElementById(o);if(i)if(i.style.display=c.target.checked?"block":"none",c.target.checked){const a=i.querySelector("input");a&&a.focus()}else{const a=i.querySelector("input");a&&(a.value="")}})});const e=document.getElementById("antecedenciaMinima");e&&e.addEventListener("change",n=>{const c=document.getElementById("antecedenciaMinimaOutro");if(c)if(n.target.value==="outro"){c.style.display="block";const o=c.querySelector("input");o&&o.focus()}else{c.style.display="none";const o=c.querySelector("input");o&&(o.value="")}})}function O(){const t=document.getElementById("briefingForm");t.addEventListener("submit",async n=>{if(n.preventDefault(),!A())return;const c=t.querySelector(".btn-submit"),o=c.querySelector(".btn-text"),i=c.querySelector(".btn-loader");o.style.display="none",i.style.display="block",c.disabled=!0;const a=D();try{if((await fetch("/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)k(),t.reset(),document.querySelectorAll(".input-outro, .conditional-field").forEach(p=>p.style.display="none");else throw new Error("Falha no envio")}catch(l){console.error("Erro:",l),N()}finally{o.style.display="block",i.style.display="none",c.disabled=!1}}),t.querySelectorAll("input[required], textarea[required]").forEach(n=>{n.addEventListener("blur",()=>S(n)),n.addEventListener("input",()=>{n.value.trim()&&q(n)})})}function A(){let t=!0,e=null;document.getElementById("briefingForm").querySelectorAll("input[required], textarea[required]").forEach(i=>{S(i)||(t=!1,e||(e=i))});const o=document.querySelectorAll(".servico-item");if(o.length===0)g("servicosError","Adicione pelo menos 1 serviço"),t=!1,e||(e=document.getElementById("servicosContainer"));else{const i=o[0].querySelector('input[name*="[nome]"]');i.value.trim()||(g("servicosError","Preencha o nome do serviço"),t=!1,e||(e=i))}return e&&(e.scrollIntoView({behavior:"smooth",block:"center"}),e.focus&&e.focus()),t}function S(t){const e=t.value.trim();return t.parentElement.querySelector(".error-message"),e?(q(t),!0):(P(t,"Este campo é obrigatório"),!1)}function P(t,e){const n=t.parentElement.querySelector(".error-message");n&&(n.textContent=e,n.classList.add("show")),t.style.borderColor="var(--color-error)"}function q(t){const e=t.parentElement.querySelector(".error-message");e&&e.classList.remove("show"),t.style.borderColor=""}function g(t,e){const n=document.getElementById(t);n&&(n.textContent=e,n.classList.add("show"))}function $(t){const e=document.getElementById(t);e&&e.classList.remove("show")}function D(){var i;const t=document.getElementById("briefingForm"),e=new FormData(t),n={};if(["nomeNegocio","tempoAtuacao","localizacao","horarioFuncionamento","estrutura","clientesSemana","pacotesPromocoes","taxaDeslocamento","taxaDeslocamentoDescricao","comoFuncionaAgendamento","agendamentoMesmoDia","antecedenciaMinima","horariosProcurados","prazoRemarcar","politicaCancelamento","frequenciaRetorno","duvidasFrequentes1","duvidasFrequentes2","duvidasFrequentes3","programaFidelidade","diferenciais","produtosTecnicas","posicionamento","estiloCliente","tomAtendimento","usaEmojis","frasesBordoes","restricoesAgente","alergiasInfo","instagram","linkPortfolio","localizacaoMaps","infoAdicionais"].forEach(a=>{const l=e.get(a);l!==null&&(n[a]=l)}),n.antecedenciaMinima==="outro"){const a=e.get("antecedenciaMinimaOutroInput");a&&a.trim()&&(n.antecedenciaMinima=`Outro: ${a}`)}return[{name:"formasPagamento",otherInput:"formasPagamentoOutroInput"},{name:"finaisSemana"},{name:"faixaEtaria"},{name:"perfilClientes",otherInput:"perfilClientesOutroInput"},{name:"objecoes",otherInput:"objecoesOutroInput"},{name:"especialidade",otherInput:"especialidadeOutroInput"},{name:"capacidadesIA",otherInput:"capacidadesIAOutroInput"},{name:"transferirHumano",otherInput:"transferirHumanoOutroInput"}].forEach(a=>{let l=e.getAll(a.name);if(a.otherInput&&l.some(d=>d==="outros"||d==="outro")){const d=e.get(a.otherInput);d&&d.trim()&&(l=l.filter(f=>f!=="outros"&&f!=="outro"),l.push(`Outro: ${d}`))}n[a.name]=l}),n.servicos=[],document.querySelectorAll(".servico-item").forEach((a,l)=>{var h,s,r;const p=((h=a.querySelector('input[name*="[nome]"]'))==null?void 0:h.value)||"",d=((s=a.querySelector('input[name*="[preco]"]'))==null?void 0:s.value)||"",f=((r=a.querySelector('input[name*="[duracao]"]'))==null?void 0:r.value)||"";p.trim()&&n.servicos.push({nome:p,preco:d,duracao:f})}),n.duvidasFrequentes=[n.duvidasFrequentes1,n.duvidasFrequentes2,n.duvidasFrequentes3].filter(a=>a&&a.trim()),delete n.duvidasFrequentes1,delete n.duvidasFrequentes2,delete n.duvidasFrequentes3,n.agendamentoMesmoDia=((i=document.getElementById("agendamentoMesmoDia"))==null?void 0:i.checked)||!1,n}function k(){document.getElementById("successModal").classList.add("show"),document.body.style.overflow="hidden"}function w(){document.getElementById("successModal").classList.remove("show"),document.body.style.overflow="",window.scrollTo({top:0,behavior:"smooth"})}function N(){document.getElementById("errorModal").classList.add("show"),document.body.style.overflow="hidden"}function E(){document.getElementById("errorModal").classList.remove("show"),document.body.style.overflow=""}document.addEventListener("click",t=>{t.target.classList.contains("modal-overlay")&&(document.getElementById("successModal").classList.contains("show")&&w(),document.getElementById("errorModal").classList.contains("show")&&E())});document.addEventListener("keydown",t=>{t.key==="Escape"&&(document.getElementById("successModal").classList.contains("show")&&w(),document.getElementById("errorModal").classList.contains("show")&&E())});window.addServico=F;window.removeServico=B;window.closeModal=w;window.closeErrorModal=E;(function(){const e="strong",n={subtle:.7,medium:.85,strong:1};let c=[],o=null,i=null;function a(s,r){const u=-35+Math.random()*10;return{x:Math.random()*s*1.5-s*.25,y:Math.random()*r*1.5-r*.25,width:30+Math.random()*60,length:r*2.5,angle:u,speed:.6+Math.random()*1.2,opacity:.12+Math.random()*.16,hue:190+Math.random()*70,pulse:Math.random()*Math.PI*2,pulseSpeed:.02+Math.random()*.03}}function l(s,r,u){if(!o)return s;const m=r%3,y=o.width/3;return s.y=o.height+100,s.x=m*y+y/2+(Math.random()-.5)*y*.5,s.width=100+Math.random()*100,s.speed=.5+Math.random()*.4,s.hue=190+r*70/u,s.opacity=.2+Math.random()*.1,s}function p(s,r){if(s.save(),s.translate(r.x,r.y),s.rotate(r.angle*Math.PI/180),typeof n>"u"){console.error("opacityMap is undefined!");return}const u=r.opacity*(.8+Math.sin(r.pulse)*.2)*n[e],m=s.createLinearGradient(0,0,0,r.length);m.addColorStop(0,`hsla(${r.hue}, 85%, 65%, 0)`),m.addColorStop(.1,`hsla(${r.hue}, 85%, 65%, ${u*.5})`),m.addColorStop(.4,`hsla(${r.hue}, 85%, 65%, ${u})`),m.addColorStop(.6,`hsla(${r.hue}, 85%, 65%, ${u})`),m.addColorStop(.9,`hsla(${r.hue}, 85%, 65%, ${u*.5})`),m.addColorStop(1,`hsla(${r.hue}, 85%, 65%, 0)`),s.fillStyle=m,s.fillRect(-r.width/2,0,r.width,r.length),s.restore()}function d(){if(!o||!i)return;i.clearRect(0,0,o.width,o.height),i.filter="blur(35px)";const s=c.length;c.forEach((r,u)=>{r.y-=r.speed,r.pulse+=r.pulseSpeed,r.y+r.length<-100&&l(r,u,s),p(i,r)}),requestAnimationFrame(d)}function f(){if(!o)return;const s=window.devicePixelRatio||1;o.width=window.innerWidth*s,o.height=window.innerHeight*s,o.style.width=`${window.innerWidth}px`,o.style.height=`${window.innerHeight}px`,i.resetTransform(),i.scale(s,s);const r=20*1.5;c.length===0&&(c=Array.from({length:r},()=>a(o.width/s,o.height/s)))}function h(){const s=document.createElement("div");s.className="beams-bg-container",o=document.createElement("canvas"),o.className="beams-canvas";const r=document.createElement("div");r.className="beams-overlay",s.appendChild(o),s.appendChild(r),document.body.prepend(s),i=o.getContext("2d"),f(),window.addEventListener("resize",f),d()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",h):h()})();
